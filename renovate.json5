{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  // "extends": ["config:best-practices"],
  "dependencyDashboard": true,
  "enabledManagers": [
    "custom.regex" // ,"dockerfile"
  ],
  "hostRules": [
    {
      "matchHost": "registry1.dsop.io",
      "token": "$REGISTRY1_TOKEN"
    }
  ],
  // "regex": {
  //   "pinDigests": true
  // },
  "customManagers": [
    // {
    //   "customType": "regex",
    //   "fileMatch": [
    //     "hardening_manifest.ya?ml"
    //   ],
    //   "matchStrings": [
    //     "org\\.opencontainers\\.image\\.version:\\s+(\\s|\"|')?(?<currentValue>\\d+\\.\\d+\\.\\d+\\.\\d+?)(\\s|\"|'|$)",
    //     "tags:\\s+-(\\s|\"|')+(?<currentValue>\\d+\\.\\d+\\.\\d+\\.\\d+?)(\\s|\"|'|$)+"
    //   ],
    //   "matchStringsStrategy": "combination",
    //   "datasourceTemplate": "custom.pages",
    //   "depNameTemplate": "kong/kong-ee",
    //   "versioningTemplate": "loose"
    // },
    // {
    //   "customType": "regex",
    //   "fileMatch": [
    //     "hardening_manifest.ya?ml"
    //   ],
    //   "matchStrings": [
    //     "url: https://packages.konghq.com/public/gateway-\\d\\d/rpm/el/\\d/x86_64/kong-enterprise-edition-fips-(?<currentValue>\\d+\\.\\d+\\.\\d+\\.\\d+?).el\\d.x86_64.rpm\n  filename: kong-enterprise-edition-rhel\\d.noarch.rpm\n  validation:\n    type: sha256\n    value: (?<currentDigest>[a-f0-9]{64}?)"
    //   ],
    //   "matchStringsStrategy": "combination",
    //   "datasourceTemplate": "custom.pages",
    //   "depNameTemplate": "kong/kong-ee",
    //   "versioningTemplate": "loose",
    //   "autoReplaceStringTemplate": "url: https://packages.konghq.com/public/gateway-{{newMajor}}{{newMinor}}/rpm/el/9/x86_64/kong-enterprise-edition-fips-{{newValue}}.el9.x86_64.rpm\n  filename: kong-enterprise-edition-rhel9.noarch.rpm\n  validation:\n    type: sha256\n    value: {{newDigest}}"
    // },
    // {
    //   "customType": "regex",
    //   "fileMatch": [
    //     "hardening_manifest.yaml"
    //   ],
    //   "matchStrings": [
    //     "org\\.opencontainers\\.image\\.version:\\s+(\\s|\"|')?(?<currentValue>\\d+\\.\\d+\\.\\d+?)(\\s|\"|'|$)",
    //     "tags:\\s+-(\\s|\"|')+(?<currentValue>\\d+\\.\\d+\\.\\d+?)(\\s|\"|'|$)+",
    //     "- url: https://packages.konghq.com/.+?/kong-(?<currentValue>\\d+\\.\\d+\\.\\d+?)\\..+?\\.rpm\\n  filename: kong\\.rpm\\n  validation:\\n    type: sha256\\n    value: (?<currentDigest>)[a-f0-9]{64}"
    //   ],
    //   "matchStringsStrategy": "any",
    //   // "extractVersionTemplate": "(?<version>\\d+\\.\\d+\\.\\d+)",
    //   "datasourceTemplate": "custom.pages",
    //   "depNameTemplate": "kong/kong"
    // },
    {
      "customType": "regex",
      "fileMatch": [
        "hardening_manifest.yaml"
      ],
      "matchStrings": [
        "https://packages.konghq.com/public/gateway-\\d\\d/rpm/el/(?<depType>\\d)/x86_64/kong-(?<currentValue>\\d+\\.\\d+\\.\\d+)\\.el"
      ],
      "matchStringsStrategy": "any",
      // "extractVersionTemplate": "kong-(?<version>\\d+\\.\\d+\\.\\d+)",
      "datasourceTemplate": "custom.pages",
      "depNameTemplate": "kong/kong",
      // "autoReplaceStringTemplate": "https://packages.konghq.com/public/gateway-{{{newMajor}}}{{{newMinor}}}/rpm/el/{{{depType}}}/x86_64/kong-{{{newVersion}}}.el"
      "autoReplaceStringTemplate": "{{{sourceUrl}}}"
    }
    // {
    //   "customType": "regex",
    //   "fileMatch": [
    //     "hardening_manifest.ya?ml"
    //   ],
    //   "matchStrings": [
    //     "org\\.opencontainers\\.image\\.version:\\s+(\\s|\"|')?(?<currentValue>\\d+\\.\\d+\\.\\d+?)(\\s|\"|'|$)",
    //     "tags:\\s+-(\\s|\"|')+(?<currentValue>\\d+\\.\\d+\\.\\d+?)(\\s|\"|'|$)+",
    //     "filename:\\s+(\\s|\"|')?kong-rhel.+\n.+\n.+\n\\s+value:\\s+(\\s|\"|')?(?<currentDigest>[a-f0-9]{64})"
    //   ],
    //   "matchStringsStrategy": "combination",
    //   "datasourceTemplate": "custom.pages",
    //   "depNameTemplate": "kong/kong",
    //   "versioningTemplate": "loose"
    // }
  ],
  "customDatasources": {
    "pages": {
      "defaultRegistryUrlTemplate": "https://kong.github.io/renovate-datasource/{{packageName}}/releases.json",
      "format": "json",
      "transformTemplates": []
    }
  },
  "packageRules": [
    {
      "matchDepTypes": ["kong/kong"],
      "groupName": "kong"
    },
    {
      "matchDepTypes": ["kong/kong-ee"],
      "groupName": "kongEE"
    }
  ]
}
