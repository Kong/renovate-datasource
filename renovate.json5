{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  // "extends": ["config:best-practices"],
  "dependencyDashboard": true,
  "enabledManagers": [
    "custom.regex",
    "dockerfile"
  ],
  "customManagers": [
    {
      "customType": "regex",
      "fileMatch": [
        "hardening_manifest.yaml"
      ],
      "matchStrings": [
        "kong-(?<currentValue>\\d+\\.\\d+\\.\\d+)\\.el"
      ],
      "matchStringsStrategy": "combination",
      "datasourceTemplate": "custom.pages",
      "depNameTemplate": "kong/kong"
    },
    {
      "customType": "regex",
      "fileMatch": [
        "hardening_manifest.yaml"
      ],
      "matchStrings": [
        "kong-enterprise-edition-(?<currentValue>\\d+\\.\\d+\\.\\d+\\.\\d+)\\.el"
      ],
      "matchStringsStrategy": "combination",
      "datasourceTemplate": "custom.pages",
      "depNameTemplate": "kong/kong-ee"
    }
  ],
  "customDatasources": {
    "pages": {
      "defaultRegistryUrlTemplate": "https://kong.github.io/renovate-datasource/{{packageName}}/releases.json",
      "format": "json",
      "transformTemplates": [
        // "{\"releases\": $.releases.{\"version\": sourceUrl}}"
      ]
    }
  },
  "packageRules": [
    {
      "matchDatasources": [
        "custom.pages"
      ],
      "groupName": "custom"
    }
  ],
  "hostRules": [
    {
      "hostType": "docker",
      "matchHost": "{{ secrets.REGISTRY1_ENDPOINT }}",
      "username": "{{ secrets.REGISTRY1_USERNAME }}",
      "password": "{{ secrets.REGISTRY1_TOKEN }}"
    }
  ]
}
